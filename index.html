<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Google Calendar API Example</title>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="875163929025-30af1oejvkrjicskbdikm8kkep56s153.apps.googleusercontent.com">
    <script>
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      function initClient() {
        gapi.auth2.init({
          apiKey: 'AIzaSyBGbQjVOJ-2gj5-OopuiOpyYqN80BCT4qc',
          client_id: 'Y875163929025-30af1oejvkrjicskbdikm8kkep56s153.apps.googleusercontent.com',
          scope: "https://www.googleapis.com/auth/calendar"
        }).then(function () {
          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
        });
      }

      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
          createEvent();
        }
      }

      function handleSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId());
        console.log('Name: ' + profile.getName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail());
        createEvent();
      }

      function handleSignOutClick() {
        gapi.auth2.getAuthInstance().signOut();
      }

      function createEvent() {
        var event = {
          'summary': 'Sample Event',
          'location': 'Sample Location',
          'description': 'Sample Description',
          'start': {
            'dateTime': '2023-02-08T09:00:00-07:00',
            'timeZone': 'America/Los_Angeles',
          },
          'end': {
            'dateTime': '2023-02-08T17:00:00-07:00',
            'timeZone': 'America/Los_Angeles',
          },
          'recurrence': [
            'RRULE:FREQ=DAILY;COUNT=2'
          ],
          'attendees': [
            {'email': 'attendee1@example.com'},
            {'email': 'attendee2@example.com'}
          ],
          'reminders': {
            'useDefault': false,
            'overrides': [
              {'method': 'email', 'minutes': 24 * 60},
              {'method': 'popup', 'minutes': 10}
]
}
};
gapi.client.load('calendar', 'v3', function () {
      var request = gapi.client.calendar.events.insert({
        'calendarId': 'he2cnbmqjtku6paaqokqa765u4@group.calendar.google.com',
        'resource': event
      });

      request.execute(function (event) {
        console.log('Event created: ' + event.htmlLink);
      });
    });
  }
</script>
</head>
<body onload="handleClientLoad()">
  <div class="g-signin2" data-onsuccess="handleSignIn"></div>
  <button onclick="handleSignOutClick()">Sign out</button>
</body>
</html>